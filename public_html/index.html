<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset=utf-8>
    <meta http-equiv=X-UA-Compatible content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

    <!-- Bootstrap -->
    <link rel="stylesheet" href="./components/bootstrap/dist/css/bootstrap.min.css"/>

    <!-- fonts -->
    <link href='https://fonts.googleapis.com/css?family=Abel|Press+Start+2P' rel='stylesheet' type='text/css'>
    <script src="https://use.fontawesome.com/d0bcbf8988.js"></script>

    <!-- Site Code -->
    <style>
      .name-header
      {
        margin-top: 10px;
          text-align: center;
      }

      @media(min-width: 992px)
      {
        .name-header
        {
          text-align: left;
        }
      }

      .name-title
      {
        font-size: 20px;
        text-shadow: 2px 2px 0px #aaa;
      }

      .profile-picture
      {
        width: 110px;
        border-radius: 55px;
        box-shadow: 2px 2px 0px 1px #042F4A;
      }

      .social-icons
      {
        padding: 0;
        margin: 0;
        list-style-type: none;
      }

      .social-icons li
      {
        display: inline;
        font-size: 7px;
        padding-right: 5px;
      }

      .location-text
      {
        color: #777777;
      }

      .summary-text
      {
        text-align: center;
        text-shadow: 1px 1px 3px #aaa;
        font-size: 18px;
      }

      .show-more
      {
        text-align: center;
      }

      .section-title
      {
        font-size: 18px;
        text-align: center;
      }

      .project-list-title
      {
        text-align: center;
      }

      .label
      {
        margin: 2px;
        vertical-align: text-top;
      }
    </style>

    <link rel="stylesheet" href="./resources/css/style.css"/>
  </head>

  <body>
    <div class="container">
      <div class="name-header name-header-large row">
        <div class="col-md-2 col-md-offset-4">
          <!-- Profile Picture Goes Here -->
          <img src="./resources/image/profile.jpg" class="profile-picture"/>
        </div>

        <div class="col-md-3">
          <h1 class="name-title">Nick Pearson</h1>
          <span class="location-text">
            <i class="fa fa-map-marker" aria-hidden="true"></i>
            <span class="sr-only">Location:</span>
             BRISTOL, UK
          </span>

          <ul class="social-icons">

            <!-- Email -->
            <li>
              <a href="mailto:nick@pearsoncgi.net" target="_blank">
                <i class="fa fa-envelope-square fa-5x" aria-hidden="true"></i>
                <span class="sr-only">Email</span>
              </a>
            </li>

            <!-- LinkedIn -->
            <li>
              <a href="http://uk.linkedin.com/pub/nick-pearson/64/776/340" target="_blank">
                <i class="fa fa-linkedin-square fa-5x" aria-hidden="true"></i>
                <span class="sr-only">LinkedIn</span>
              </a>
            </li>

            <!-- GitHub -->
            <li>
              <a href="https://github.com/Nick-Pearson" target="_blank">
                <i class="fa fa-github-square fa-5x" aria-hidden="true"></i>
                <span class="sr-only">Github</span>
              </a>
            </li>

          </ul>
        </div>
      </div>

      <div class="row">
        <div class="col-md-6 col-md-offset-3">
          <hr>

          <p class="summary-text">Video Game Programmer with experience working on small projects and AAA games, currently studying Computer Science at The University of Bristol.</p>
        </div>
      </div>

      <hr>

      <h1 class="section-title">Projects</h1>

      <!-- <span id="project-load-msg"><i class="fa fa-cog fa-spin fa-fw" aria-hidden="true"></i><span class="sr-only">Loading...</span></span> -->

      <div id="project-container">


      </div>

      <p class="show-more"><a href = "javascript:showMoreProjects();"><i class="fa fa-caret-down"></i> Show 3 More <i class="fa fa-caret-down"></i></a></p>

      <hr>

      <h1 class="section-title">Qualifications</h1>
      <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>

    </div>

    <footer>
      <p>
        Source code for this site is availible on <a href="https://github.com/Nick-Pearson/ProfileWebsite" target="_blank">GitHub <i class="fa fa-external-link"></i></a>
      </p>
    </footer>

    <!-- Scripts -->
    <script src="./components/jquery/dist/jquery.min.js"></script>

    <script src="../components/bootstrap/dist/js/bootstrap.min.js"></script>

    <script src="./components/showdown/dist/showdown.js"></script>
    <script src="./components/showdown-icon/showdown-icon.js"></script>

    <script src="./components/mustache.js/mustache.js"></<script>

    </script>

    <script type="text/javascript">
      //start an  AJAX request for the data JSON file
      function LoadDataFile()
      {
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
          if (this.readyState == 4 && this.status == 200) {
            OnDataFileLoaded(this.responseText);
          }
        };
        xhttp.open("GET", "./data/projects.json", true);
        xhttp.send();
      }

      function OnDataFileLoaded(fileText)
      {
        var projectDataObj = JSON.parse(fileText);

        if(projectDataObj == null)
        {
          alert("invalid data");
          return;
        }

        //create a MD parser object
        var mdParser = new showdown.Converter({ extensions: ["icon"]});
        mdParser.setOption("openLinksInNewWindow", true);

        var containerDiv = $("#project-container");
        var imgLeft = true;

        for(var projIdx = 0; projIdx < projectDataObj.projects.length; ++projIdx)
        {
          var projData = projectDataObj.projects[projIdx];

          if(projData.featured == false)
            continue;

          containerDiv.append(GenerateProjectHTMLBlob(projectDataObj, projData, mdParser, imgLeft));
          imgLeft = !imgLeft;

          console.log("----- New Project -----");
          console.log(projData.projectName);
          console.log(mdParser.makeHtml(projData.summaryMd));
        }
      }

      function GenerateProjectHTMLBlob(dataObj, projData, mdParser, imgLeft = true)
      {
        var TemplateData = {
          YearString:     GenerateYearString(projData),
          LabelsString:   GenerateLabelHTML(dataObj, projData),
          SummaryString:  mdParser.makeHtml(projData.summaryMd),
          projData:       projData
        };

        var ImgLTemplate = "<div class=\"blob\">\
                              <div class=\"row\">\
                                <div class=\"col-md-12 visible-xs visible-sm\">\
                                  <h1>{{projData.projectName}} ({{YearString}})</h1>\
                                  {{&LabelsString}}<br/>\
                                </div>\
                                <div class=\"col-md-3\">\
                                  <div class=\"fader hidden-xs hidden-sm\"></div>\
                                  <img src = \"../resources/image/{{projData.summaryImage}}\" width=\"100%\" class=\"profile-img\"/>\
                                </div>\
                                <div class=\"col-md-9\">\
                                  <div  class=\"hidden-xs hidden-sm\">\
                                    <h1>{{projData.projectName}}\
                                    {{&LabelsString}}</h1>\
                                    <p>{{YearString}}</p>\
                                  </div>\
                                  {{&SummaryString}}\
                                  <span class=\"visible-xs visible-sm\" style = \"margin-top:50px;\"></span>\
                                </div>\
                              </div>\
                            </div>";

        var ImgRTemplate = "<div class=\"blob\">\
                              <div class=\"row\">\
                                <div class=\"col-md-12 visible-xs visible-sm\">\
                                  <h1>{{projData.projectName}} ({{YearString}})</h1>\
                                  {{&LabelsString}}<br/>\
                                </div>\
                                <div class=\"col-md-3 visible-xs visible-sm\">\
                                    <div class=\"fadel hidden-xs hidden-sm\"></div>\
                                    <img src = \"../resources/image/{{projData.summaryImage}}\" width=\"100%\" class=\"profile-img\"/>\
                                </div>\
                                <div class=\"col-md-9\" style=\"padding-left:20px;\">\
                                  <div  class=\"hidden-xs hidden-sm\">\
                                    <h1>{{projData.projectName}}\
                                    {{&LabelsString}}</h1>\
                                    <p>{{YearString}}</p>\
                                  </div>\
                                  {{&SummaryString}}\
                                  <span class=\"visible-xs visible-sm\" style = \"margin-top:50px;\"></span>\
                                </div>\
                                <div class=\"col-md-3 hidden-xs hidden-sm\">\
                                    <div class=\"fadel hidden-xs hidden-sm\"></div>\
                                    <img src = \"../resources/image/{{projData.summaryImage}}\" width=\"100%\" class=\"profile-img\"/>\
                                </div>\
                              </div>\
                            </div>";

        if(imgLeft)
          return Mustache.to_html(ImgLTemplate, TemplateData);

        return Mustache.to_html(ImgRTemplate, TemplateData);
      }

      function GenerateLabelHTML(dataObj, projData)
      {
        var LabelString = "";

        for(var tagIdx = 0; tagIdx < projData.tags.length; ++tagIdx)
        {
          var TagData = dataObj.tagDefinitions[projData.tags[tagIdx]];

          if(TagData == undefined)
            continue;

          var TagDisplayName = (TagData.displayName != undefined) ? TagData.displayName : projData.tags[tagIdx];

          LabelString = LabelString + "<span class=\"label\" style=\"background-color:#" + TagData.tagColour + "\">" + TagDisplayName + "</span>";
        }

        return LabelString;
      }

      function GenerateYearString(projData)
      {
        var hasMonthRange = (projData.month == undefined);
        var hasYearRange = (projData.year == undefined);

        var monthStart = hasMonthRange ? projData.monthStart : projData.month;
        var monthEnd = hasMonthRange ? projData.monthEnd : projData.month;

        var yearStart = hasYearRange ? projData.yearStart : projData.year;
        var yearEnd = hasYearRange ? projData.yearEnd : projData.year;

        if(monthStart == monthEnd && yearStart == yearEnd)
        {
          return MonthToString(monthStart) + " " + yearStart;
        }

        return MonthToString(monthStart) + " " + yearStart + " - " + MonthToString(monthEnd) + " " + yearEnd;
      }

      function MonthToString(month)
      {
        switch(month)
        {
        case 1:
          return "Jan";
        case 2:
          return "Feb";
        case 3:
          return "Mar";
        case 4:
          return "Apr";
        case 5:
          return "May";
        case 6:
          return "Jun";
        case 7:
          return "Jul";
        case 8:
          return "Aug";
        case 9:
          return "Sep";
        case 10:
          return "Oct";
        case 11:
          return "Nov";
        }

        return "Dec"
      }

      $(document).ready(function() {
        LoadDataFile();
      });
    </script>
  </body>
</html>
