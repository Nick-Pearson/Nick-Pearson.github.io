<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset=utf-8>
    <meta http-equiv=X-UA-Compatible content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

    <meta name=description content="Nick Pearson, Games Programmer">
    <meta name=keywords content="Game, Programmer, Development, C#, Unity, Unreal Engine. UE4, Sumo Digital, Rising Star, C++, Blender">
    <meta name=author content="Nick Pearson">

    <!-- Bootstrap -->
    <link rel="stylesheet" href="./components/bootstrap/dist/css/bootstrap.min.css"/>

    <!-- fonts -->
    <link href='https://fonts.googleapis.com/css?family=Abel|Press+Start+2P' rel='stylesheet' type='text/css'>
    <script src="https://use.fontawesome.com/d0bcbf8988.js"></script>

    <link rel="stylesheet" href="./resources/css/style.css"/>
  </head>

  <body>
    <div class="container">
      <div class="name-header name-header-large row">
        <div class="col-md-2 col-md-offset-4">
          <!-- Profile Picture Goes Here -->
          <img src="./resources/image/profile.jpg" class="profile-picture"/>
        </div>

        <div class="col-md-3">
          <h1 class="name-title">Nick Pearson</h1>
          <span class="location-text">
            <i class="fa fa-map-marker" aria-hidden="true"></i>
            <span class="sr-only">Location:</span>
             BRISTOL, UK
          </span>

          <ul class="social-icons">

            <!-- Email -->
            <li>
              <a href="mailto:nick@pearsoncgi.net" target="_blank">
                <i class="fa fa-envelope-square fa-5x" aria-hidden="true"></i>
                <span class="sr-only">Email</span>
              </a>
            </li>

            <!-- LinkedIn -->
            <li>
              <a href="http://uk.linkedin.com/pub/nick-pearson/64/776/340" target="_blank">
                <i class="fa fa-linkedin-square fa-5x" aria-hidden="true"></i>
                <span class="sr-only">LinkedIn</span>
              </a>
            </li>

            <!-- GitHub -->
            <li>
              <a href="https://github.com/Nick-Pearson" target="_blank">
                <i class="fa fa-github-square fa-5x" aria-hidden="true"></i>
                <span class="sr-only">Github</span>
              </a>
            </li>

          </ul>
        </div>
      </div>

      <div class="row">
        <div class="col-md-6 col-md-offset-3">
          <hr>

          <p class="summary-text">Video Game Programmer with experience working on small projects and AAA games, currently studying Computer Science at The University of Bristol.</p>
        </div>
      </div>

      <hr>

      <h1 class="section-title">Projects</h1>

      <div id="project-container">
      </div>

      <p id="project-load-msg" class="centered" style="font-size: 20px;"><i class="fa fa-cog fa-spin fa-fw" aria-hidden="true"></i><span class="sr-only">Loading...</span></p>

      <p id="show-more" class="centered" style="display: none;"><a href = "javascript:AddProjectBlobs(3);"><i class="fa fa-caret-down" aria-hidden="true"></i> <span id="show-more-text">Show 3 More</span> <i class="fa fa-caret-down" aria-hidden="true"></i></a></p>

      <hr>

      <h1 class="section-title">Qualifications</h1>
      <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>

    </div>

    <footer>
      <p>
        Source code for this site is availible on <a href="https://github.com/Nick-Pearson/ProfileWebsite" target="_blank">GitHub <i class="fa fa-external-link"></i></a>
      </p>
    </footer>

    <!-- Scripts -->
    <script src="./components/jquery/dist/jquery.min.js"></script>

    <script src="../components/bootstrap/dist/js/bootstrap.min.js"></script>

    <script src="./components/showdown/dist/showdown.js"></script>
    <script src="./components/showdown-icon/showdown-icon.js"></script>

    <script src="./components/mustache.js/mustache.js"></<script>

    </script>

    <script type="text/javascript">
      //start an  AJAX request for the data JSON file
      function LoadDataFile()
      {
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
          if (this.readyState == 4 && this.status == 200) {
            OnDataFileLoaded(this.responseText);
          }
        };
        xhttp.open("GET", "./data/projects.json", true);
        xhttp.send();
      }

      //globals to track the generated blobs
      var dataObj = null;
      var imgLeft = true;
      var blobCount = 0;

      function OnDataFileLoaded(fileText)
      {
        $("#project-load-msg").hide();

        dataObj = JSON.parse(fileText);

        if(dataObj == null)
        {
          alert("invalid data");
          return;
        }

        AddProjectBlobs(3);
      }

      function AddProjectBlobs(Count)
      {
        //check range
        if(Count == 0)
          return;

        if(Count > dataObj.projects.length - blobCount)
          return AddProjectBlobs(dataObj.projects.length - blobCount);

        //create a MD parser object
        var mdParser = new showdown.Converter({ extensions: ["icon"]});
        mdParser.setOption("openLinksInNewWindow", true);

        var containerDiv = $("#project-container");

        for(var projIdx = 0; projIdx < Count; ++projIdx)
        {
          var projData = dataObj.projects[projIdx + blobCount];

          containerDiv.append(GenerateProjectHTMLBlob(projData, mdParser, imgLeft));
          imgLeft = !imgLeft;
        }

        blobCount += Count;

        if(blobCount >= dataObj.projects.length)
        {
          $("#show-more").hide();
        }
        else
        {
          $("#show-more-text").text("Show " + Math.min(3, dataObj.projects.length - blobCount) + " More");
          $("#show-more").show();
        }
      }

      function GenerateProjectHTMLBlob(projData, mdParser, imgLeft = true)
      {
        var TemplateData = {
          YearString:     GenerateYearString(projData),
          LabelsString:   GenerateLabelHTML(dataObj, projData),
          MainPageLink:   "#",
          SummaryString:  mdParser.makeHtml(projData.summaryMd + " ... [Read More](" + this.MainPageLink + ")"),
          projData:       projData
        };

        var ImgLTemplate = "<div class=\"blob\">\
                              <div class=\"row\">\
                                <a href=\"{{MainPageLink}}\" class=\"col-md-12 visible-xs visible-sm discrete-link\">\
                                  <h1>{{projData.projectName}} ({{YearString}})</h1>\
                                  {{&LabelsString}}<br/>\
                                </a>\
                                <a href=\"{{MainPageLink}}\" class=\"col-md-3\">\
                                  <div class=\"fader hidden-xs hidden-sm\"></div>\
                                  <img src = \"../resources/image/{{projData.summaryImage}}\" width=\"100%\" class=\"profile-img\"/>\
                                </a>\
                                <div class=\"col-md-9\">\
                                  <a href=\"{{MainPageLink}}\" class=\"hidden-xs hidden-sm discrete-link\">\
                                    <h1>{{projData.projectName}}\
                                    {{&LabelsString}}</h1>\
                                    <p>{{YearString}}</p></a>\
                                  </a>\
                                  {{&SummaryString}}\
                                  <span class=\"visible-xs visible-sm\" style = \"margin-top:50px;\"></span>\
                                </div>\
                              </div>\
                            </div>";

        var ImgRTemplate = "<div class=\"blob\">\
                              <div class=\"row\">\
                                <a href=\"{{MainPageLink}}\" class=\"col-md-12 visible-xs visible-sm discrete-link\">\
                                  <h1>{{projData.projectName}} ({{YearString}})</h1>\
                                  {{&LabelsString}}<br/>\
                                </a>\
                                <a href=\"{{MainPageLink}}\" class=\"col-md-3 visible-xs visible-sm\">\
                                    <div class=\"fadel hidden-xs hidden-sm\"></div>\
                                    <img src = \"../resources/image/{{projData.summaryImage}}\" width=\"100%\" class=\"profile-img\"/>\
                                </a>\
                                <div class=\"col-md-9\" style=\"padding-left:20px;\">\
                                  <a href=\"{{MainPageLink}}\"  class=\"hidden-xs hidden-sm discrete-link\">\
                                    <h1>{{projData.projectName}}\
                                    {{&LabelsString}}</h1>\
                                    <p>{{YearString}}</p>\
                                  </a>\
                                  {{&SummaryString}}\
                                  <span class=\"visible-xs visible-sm\" style = \"margin-top:50px;\"></span>\
                                </div>\
                                <a href=\"{{MainPageLink}}\" class=\"col-md-3 hidden-xs hidden-sm\">\
                                    <div class=\"fadel hidden-xs hidden-sm\"></div>\
                                    <img src = \"../resources/image/{{projData.summaryImage}}\" width=\"100%\" class=\"profile-img\"/>\
                                </a>\
                              </div>\
                            </div>";

        if(imgLeft)
          return Mustache.to_html(ImgLTemplate, TemplateData);

        return Mustache.to_html(ImgRTemplate, TemplateData);
      }

      function GenerateLabelHTML(dataObj, projData)
      {
        var LabelString = "";

        for(var tagIdx = 0; tagIdx < projData.tags.length; ++tagIdx)
        {
          var TagData = dataObj.tagDefinitions[projData.tags[tagIdx]];

          if(TagData == undefined)
            continue;

          var TagDisplayName = (TagData.displayName != undefined) ? TagData.displayName : projData.tags[tagIdx];

          LabelString = LabelString + "<span class=\"label\" style=\"background-color:#" + TagData.tagColour + "\">" + TagDisplayName + "</span>";
        }

        return LabelString;
      }

      function GenerateYearString(projData)
      {
        var hasMonthRange = (projData.month == undefined);
        var hasYearRange = (projData.year == undefined);

        var monthStart = hasMonthRange ? projData.monthStart : projData.month;
        var monthEnd = hasMonthRange ? projData.monthEnd : projData.month;

        var yearStart = hasYearRange ? projData.yearStart : projData.year;
        var yearEnd = hasYearRange ? projData.yearEnd : projData.year;

        if(monthStart == monthEnd && yearStart == yearEnd)
        {
          return MonthToString(monthStart) + " " + yearStart;
        }

        return MonthToString(monthStart) + " " + yearStart + " - " + MonthToString(monthEnd) + " " + yearEnd;
      }

      function MonthToString(month)
      {
        switch(month)
        {
        case 1:
          return "Jan";
        case 2:
          return "Feb";
        case 3:
          return "Mar";
        case 4:
          return "Apr";
        case 5:
          return "May";
        case 6:
          return "Jun";
        case 7:
          return "Jul";
        case 8:
          return "Aug";
        case 9:
          return "Sep";
        case 10:
          return "Oct";
        case 11:
          return "Nov";
        }

        return "Dec"
      }

      $(document).ready(function() {
        LoadDataFile();
      });
    </script>
  </body>
</html>
